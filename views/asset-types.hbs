<div class="asset-structure-app" data-app="asset-structure">
  <aside class="asset-structure-sidebar" aria-label="Asset structure navigation">
    <div class="sidebar-section">
      <a href="/asset-structure" class="sidebar-link">Categories</a>
      <a href="/asset-types" class="sidebar-link sidebar-link--active">Asset types</a>
    </div>
  </aside>
  <section class="asset-structure-content">
    <header class="page-header">
      <div>
        <h1 class="page-title">Asset types</h1>
        <p class="page-subtitle">
          Review and curate the asset types sourced from your Asset Pool mappings.
        </p>
      </div>
      <div class="page-actions">
        <a class="button button--ghost" href="/asset-structure">Back to categories</a>
      </div>
    </header>
    <div class="structure-body">
      <section class="structure-section" aria-labelledby="asset-types-title">
        <div class="section-header">
          <h2 class="section-title" id="asset-types-title">Asset types</h2>
        </div>
        {{#if assetTypeField}}
          <p class="structure-section__subtitle">
            Asset types are derived from the <strong>{{assetTypeField}}</strong> field in your Asset Pool.
          </p>
        {{/if}}
        <div class="card structure-card">
          {{#if assetTypeField}}
            {{#if assetTypes.length}}
              <div class="asset-type-grid" data-asset-type-list>
                {{#each assetTypes}}
                  <button
                    class="asset-type-pill"
                    type="button"
                    data-asset-type-button
                    data-asset-type-name="{{name}}"
                    data-asset-type-decision="{{decision}}"
                    data-asset-type-comment="{{comment}}"
                  >
                    <span class="asset-type-pill__name">{{name}}</span>
                    <span class="asset-type-pill__meta">{{count}} {{#if (eq count 1)}}asset{{else}}assets{{/if}}</span>
                    <span class="asset-type-pill__status" data-asset-type-status data-status="{{decision}}">
                      {{#if (eq decision "ignore")}}Ignore{{else}}Use{{/if}}
                    </span>
                    {{#if groups.length}}
                      {{#each groups}}
                        <span
                          hidden
                          data-asset-type-group
                          data-group-id="{{id}}"
                          data-group-title="{{title}}"
                          data-group-url="{{url}}"
                        ></span>
                      {{/each}}
                    {{/if}}
                  </button>
                {{/each}}
              </div>
            {{else}}
              <p class="empty-state">No asset pool entries matched the field "{{assetTypeField}}".</p>
            {{/if}}
          {{else}}
            <p class="empty-state">Choose an asset type field in the Asset Pool overview to populate this list.</p>
          {{/if}}
        </div>
      </section>
    </div>
  </section>
</div>

<div class="modal" data-asset-type-decision-modal hidden aria-hidden="true">
  <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="asset-type-decision-title">
    <header class="modal-header">
      <h2 id="asset-type-decision-title" data-asset-type-modal-title>Asset type options</h2>
      <button class="icon-button" type="button" data-close-asset-type-decision aria-label="Close asset type settings">&times;</button>
    </header>
    <div class="modal-body">
      <div class="form-field">
        <label for="asset-type-decision-select">Decision</label>
        <select id="asset-type-decision-select" name="decision" data-asset-type-decision-select>
          <option value="use">Use</option>
          <option value="ignore">Ignore</option>
        </select>
      </div>
      <div class="form-field">
        <label for="asset-type-comment">Comment</label>
        <textarea
          id="asset-type-comment"
          name="comment"
          rows="3"
          placeholder="Add an optional comment"
          data-asset-type-comment
        ></textarea>
      </div>
      <div class="form-field asset-type-groups">
        <p class="form-field__label">Used in groups</p>
        <p class="helper-text" data-asset-type-group-empty>No groups are using this asset type yet.</p>
        <ul class="asset-type-groups__list" data-asset-type-group-list hidden></ul>
      </div>
      <p class="helper-text asset-type-groups__warning" data-asset-type-ignore-warning hidden>
        This asset type is assigned to at least one group and cannot be ignored.
      </p>
      <p class="form-error" data-asset-type-decision-error hidden></p>
    </div>
    <div class="modal-footer">
      <button class="button button--ghost" type="button" data-cancel-asset-type-decision>Cancel</button>
      <button class="button" type="button" data-save-asset-type-decision>Save</button>
    </div>
  </div>
</div>
