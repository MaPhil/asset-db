<div class="asset-pool-app" data-app="asset-pool" data-view="overview">
  <aside class="asset-pool-sidebar" aria-label="Navigation des Asset-Pools">
    <div class="sidebar-section">
      <button type="button" class="sidebar-link sidebar-link--active" data-sidebar-link="overview">
        Asset-Pool (Übersicht)
      </button>
      <button type="button" class="sidebar-link" data-sidebar-link="manipulators">Manipulators</button>
    </div>
    <div class="sidebar-section">
      <p class="sidebar-heading">Rohdaten</p>
      <nav class="sidebar-list" data-raw-list aria-label="Rohdatentabellen"></nav>
      <button class="button sidebar-import" type="button" data-open-import>
        Tabelle importieren
      </button>
    </div>
  </aside>
  <section class="asset-pool-content" data-region="content">
    <div class="asset-pool-view" data-asset-pool-panel="overview">
      <header class="page-header">
        <div>
          <h1 class="page-title">Asset-Pool</h1>
          <p class="page-subtitle">
            Der Asset-Pool greift über Ihre Spaltenzuordnungen auf Daten aus den Rohtabellen zu.
          </p>
        </div>
        <div class="page-actions">
          <button
            class="button button--ghost"
            type="button"
            data-open-asset-type-modal
            aria-haspopup="dialog"
            aria-expanded="false"
          >
            Feld für Asset-Typ festlegen
          </button>
          <button
            class="button button--ghost"
            type="button"
            data-open-field-manager
            aria-haspopup="dialog"
            aria-expanded="false"
          >
            Felder verwalten
          </button>
        </div>
      </header>
      <div class="asset-pool-body" data-overview-body>
        <div class="card card--empty" data-empty-state hidden>
          <h2>Keine Daten hinzugefügt</h2>
          <p>Bitte importieren Sie eine Rohdatentabelle, um zu beginnen.</p>
        </div>
        <div class="table-container" data-asset-pool-table hidden></div>
      </div>
    </div>
    <div class="asset-pool-view" data-asset-pool-panel="manipulators" hidden>
      <header class="page-header">
        <div>
          <h1 class="page-title">Manipulators</h1>
          <p class="page-subtitle">Create rules that bundle assets from the pool for further processing.</p>
        </div>
        <div class="page-actions">
          <button class="button" type="button" data-open-manipulator-modal>Create Manipulator</button>
        </div>
      </header>
      <div class="asset-pool-body" data-manipulator-body>
        <p class="helper-text" data-manipulator-loading hidden>Loading manipulators…</p>
        <p class="form-error" data-manipulator-error hidden></p>
        <div class="card card--empty" data-manipulator-empty hidden>
          <h2>No manipulators created yet</h2>
          <p>Create a manipulator to define how assets should be combined.</p>
        </div>
        <div class="table-container" data-manipulator-table hidden></div>
      </div>
    </div>
  </section>
</div>

<div class="toast-container" role="status" aria-live="polite"></div>

<div class="modal" data-field-manager-modal hidden aria-hidden="true">
  <div
    class="modal-dialog"
    role="dialog"
    aria-modal="true"
    aria-labelledby="field-manager-title"
    data-field-manager
  >
    <header class="modal-header">
      <h2 id="field-manager-title">Felder</h2>
      <button
        class="icon-button"
        type="button"
        data-close-field-manager
        aria-label="Felder schließen"
      >&times;</button>
    </header>
    <div class="modal-body">
      <p class="modal-description field-manager__description">
        Verwalten Sie die Felder, die derzeit im Asset-Pool verwendet werden. Das Entfernen eines Feldes löscht es aus
        allen Zuordnungen.
      </p>
      <div class="field-manager__error" data-field-error hidden></div>
      <div class="field-manager__list" data-field-list></div>
      <div class="field-manager__actions">
        <input
          class="field-manager__input"
          type="text"
          placeholder="Neues Feld"
          aria-label="Neues Feld"
          data-field-input
        />
        <button class="button" type="button" data-add-field>Hinzufügen</button>
      </div>
    </div>
    <footer class="modal-footer">
      <button class="button button--ghost" type="button" data-close-field-manager>Schließen</button>
    </footer>
  </div>
</div>

<div class="modal" data-asset-type-modal hidden aria-hidden="true">
  <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="asset-type-modal-title">
    <header class="modal-header">
      <h2 id="asset-type-modal-title">Feld für Asset-Typ auswählen</h2>
      <button class="icon-button" type="button" data-close-asset-type-modal aria-label="Dialog zum Feld für Asset-Typ schließen">&times;</button>
    </header>
    <div class="modal-body">
      <p class="modal-description">
        Wählen Sie, welches Asset-Pool-Feld die Asset-Typen im Bereich Asset-Struktur füllen soll.
      </p>
      <div class="form-field">
        <label for="asset-type-field-select">Feld für Asset-Typ</label>
        <select id="asset-type-field-select" name="assetTypeField" data-asset-type-field-select>
          <option value="">Feld auswählen</option>
        </select>
        <p class="helper-text" data-asset-type-field-helper>
          Nur zugeordnete Felder mit Daten erscheinen in dieser Liste.
        </p>
      </div>
      <p class="form-error" data-asset-type-field-error hidden></p>
    </div>
    <div class="modal-footer">
      <button class="button button--ghost" type="button" data-cancel-asset-type-modal>Abbrechen</button>
      <button class="button" type="button" data-save-asset-type-field>Speichern</button>
    </div>
  </div>
</div>

<div class="modal" data-manipulator-modal hidden aria-hidden="true">
  <div
    class="modal-dialog modal-dialog--large"
    role="dialog"
    aria-modal="true"
    aria-labelledby="manipulator-modal-title"
  >
    <header class="modal-header">
      <h2 id="manipulator-modal-title">Create Manipulator</h2>
      <button
        class="icon-button"
        type="button"
        aria-label="Close manipulator configuration"
        data-close-manipulator-modal
      >
        &times;
      </button>
    </header>
    <div class="modal-body">
      <form class="selector-form" id="manipulator-form" data-manipulator-form>
        <div class="form-field form-field--full">
          <label for="manipulator-title">Title</label>
          <input
            id="manipulator-title"
            type="text"
            name="title"
            placeholder="Name the manipulator"
            data-manipulator-title
            autocomplete="off"
          />
        </div>
        <div class="form-field form-field--full">
          <label for="manipulator-description">Description</label>
          <textarea
            id="manipulator-description"
            name="description"
            rows="3"
            placeholder="Add a brief description"
            data-manipulator-description
          ></textarea>
        </div>
        <div class="selector-builder" data-manipulator-builder>
          <p class="helper-text selector-builder__hint">
            Define rules to decide which assets belong to this manipulator.
          </p>
          <div class="selector-group__container selector-group__container--root" data-manipulator-root>
            <div class="selector-group__header">
              <label class="selector-group__matches-label" for="manipulator-mode">
                Combinator
                <select id="manipulator-mode" class="selector-group__matches" data-manipulator-mode>
                  <option value="all">Match all rules (AND)</option>
                  <option value="any">Match any rule (OR)</option>
                </select>
              </label>
            </div>
            <div class="selector-group__children" data-manipulator-rules></div>
            <p class="helper-text" data-manipulator-no-fields hidden>
              Add Asset-Pool fields to define manipulator rules.
            </p>
            <div class="selector-group__actions">
              <button class="button button--ghost selector-group__action" type="button" data-add-manipulator-rule>
                Add rule
              </button>
            </div>
          </div>
        </div>
        <p class="form-error" data-manipulator-form-error hidden></p>
      </form>
    </div>
    <div class="modal-footer">
      <button class="button button--ghost" type="button" data-close-manipulator-modal>Cancel</button>
      <button class="button" type="submit" form="manipulator-form" data-save-manipulator>Create</button>
    </div>
  </div>
</div>

<div class="modal" data-import-modal hidden>
  <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="import-modal-title">
    <header class="modal-header">
      <h2 id="import-modal-title">Rohdatentabelle importieren</h2>
      <button class="icon-button" type="button" data-close-modal aria-label="Import-Dialog schließen">&times;</button>
    </header>
    <div class="modal-body" data-import-stage></div>
  </div>
</div>
