<div
  class="asset-structure-app"
  data-app="asset-structure"
  data-topic-id="{{topic.id}}"
  {{#if topic.measure.id}}data-measure-topic-id="{{topic.measure.id}}"{{/if}}
>
  <section class="asset-structure-content">
    <header class="page-header">
      <div>
        <h1 class="page-title">{{#if topic.displayTitle}}{{topic.displayTitle}}{{else}}Unbenanntes Themengebiet{{/if}}</h1>
        <p class="page-subtitle">Verwalten Sie die Sub-Themengebiete und AssetUnterKategorien innerhalb dieses Themengebiets.</p>
      </div>
      <div class="page-actions">
        {{#if topic.measuresUrl}}
          <a class="button button--ghost" href="{{topic.measuresUrl}}">Maßnahmen anzeigen</a>
        {{/if}}
        <a class="button button--ghost" href="/asset-structure">Zur Übersicht</a>
      </div>
    </header>

    <nav class="breadcrumb" aria-label="Breadcrumb">
      <a href="/asset-structure">Asset-Struktur</a>
      <span aria-hidden="true">›</span>
      <span aria-current="page">{{#if topic.displayTitle}}{{topic.displayTitle}}{{else}}Unbenanntes Themengebiet{{/if}}</span>
    </nav>

    <div class="structure-body">
      <section class="card structure-card" aria-labelledby="topic-details-title">
        <div class="section-header">
          <h2 class="section-title" id="topic-details-title">Themengebiet-Details</h2>
          <button class="button" type="button">Änderungen speichern</button>
        </div>
        <form class="form-grid">
          <div class="form-field">
            <label for="topic-title">Titel</label>
            <input id="topic-title" type="text" value="{{topic.displayTitle}}" disabled aria-disabled="true" />
          </div>
          <div class="form-field form-field--full">
            <label for="topic-notes">Notizen</label>
            <textarea id="topic-notes" name="notes" rows="4" placeholder="Eigene Hinweise oder Informationen ergänzen">{{notes}}</textarea>
          </div>
        </form>
        <dl class="meta-grid">
          <div class="meta-item">
            <dt>Maßnahmen-Themengebiet</dt>
            <dd>{{#if topic.measure.title}}{{topic.measure.title}}{{else}}—{{/if}}</dd>
          </div>
          <div class="meta-item">
            <dt>Maßnahmen-ID</dt>
            <dd>{{#if topic.measure.id}}{{topic.measure.id}}{{else}}—{{/if}}</dd>
          </div>
        </dl>
      </section>

      <section class="structure-section" aria-labelledby="sub-topics-title">
        <div class="section-header">
          <h2 class="section-title" id="sub-topics-title">Sub-Themengebiete</h2>
        </div>
        <p class="helper-text">{{subTopicCount}} Sub-Themengebiete verfügbar. Wählen Sie eines aus, um die zugehörigen AssetUnterKategorien zu verwalten.</p>
        <div class="card structure-card">
          {{#if subTopics.length}}
            <div class="table-wrapper">
              <table class="table table--interactive" aria-describedby="sub-topics-title">
                <thead>
                  <tr>
                    <th scope="col">Sub-Themengebiet</th>
                    <th scope="col">AssetUnterKategorien</th>
                    <th scope="col">Gruppen</th>
                    <th scope="col">Maßnahmen-ID</th>
                    <th scope="col">Maßnahmen</th>
                  </tr>
                </thead>
                <tbody>
                  {{#each subTopics}}
                    <tr>
                      <td><a class="table-link" href="/asset-structure/{{topicId}}/{{id}}">{{title}}</a></td>
                      <td><a class="table-link" href="/asset-structure/{{topicId}}/{{id}}">{{assetSubCategoryCount}}</a></td>
                      <td><a class="table-link" href="/asset-structure/{{topicId}}/{{id}}">{{groupCount}}</a></td>
                      <td>
                        {{#if measure.id}}
                          {{measure.id}}
                        {{else}}
                          —
                        {{/if}}
                      </td>
                      <td>
                        {{#if measuresUrl}}
                          <a class="table-link table-link--muted" href="{{measuresUrl}}">In Maßnahmen öffnen</a>
                        {{else}}
                          —
                        {{/if}}
                      </td>
                    </tr>
                  {{/each}}
                </tbody>
              </table>
            </div>
          {{else}}
            <p class="empty-state">Für dieses Themengebiet wurden noch keine Sub-Themengebiete erfasst.</p>
          {{/if}}
        </div>
      </section>
    </div>
  </section>
</div>
