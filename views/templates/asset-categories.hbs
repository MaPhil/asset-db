<div class="asset-structure-app" data-app="asset-structure" data-view="asset-categories">
  <aside class="asset-structure-sidebar" aria-label="Asset-Struktur-Navigation">
    <div class="sidebar-section">
      <a href="/asset-structure" class="sidebar-link">Themengebiete</a>
      <a href="/asset-types" class="sidebar-link">Asset-Typen</a>
      <a href="/asset-categories" class="sidebar-link sidebar-link--active">Asset-Kategorien</a>
    </div>
  </aside>
  <section class="asset-structure-content">
    <header class="page-header">
      <div>
        <h1 class="page-title">Asset-Kategorien</h1>
        <p class="page-subtitle">
          Verwalten Sie zusätzliche Kategorien für Ihre Assets und weisen Sie AssetUnterKategorien zu.
        </p>
      </div>
    </header>

    <div class="structure-body">
      <section class="structure-section" aria-labelledby="asset-category-create-title">
        <div class="card structure-card">
          <div class="section-header">
            <h2 class="section-title" id="asset-category-create-title">Neue Asset-Kategorie erstellen</h2>
          </div>
          <form data-asset-category-create class="asset-category-create-form">
            <div class="form-field">
              <label for="asset-category-name">Name</label>
              <div class="asset-category-create-input">
                <input
                  id="asset-category-name"
                  name="name"
                  type="text"
                  placeholder="z. B. Kritische Infrastruktur"
                  autocomplete="off"
                  required
                  data-asset-category-name-input
                />
                <button class="button" type="submit" data-create-asset-category>Erstellen</button>
              </div>
            </div>
            <p class="form-error" data-asset-category-create-error hidden></p>
          </form>
        </div>
      </section>

      <section class="structure-section" aria-labelledby="asset-category-table-title">
        <div class="section-header">
          <h2 class="section-title" id="asset-category-table-title">Asset-Kategorien</h2>
          <p class="helper-text" data-asset-category-summary>
            {{categoryCount}} Kategorien, {{assetSubCategoryCount}} verfügbare AssetUnterKategorien.
          </p>
        </div>
        <div class="card structure-card" data-asset-category-table>
          <div class="table-wrapper" role="region" aria-live="polite">
            <table class="table table--interactive" aria-describedby="asset-category-table-title">
              <thead>
                <tr>
                  <th scope="col">Asset-Kategorie</th>
                  <th scope="col">Zugeordnete AssetUnterKategorien</th>
                  <th scope="col">Status</th>
                </tr>
              </thead>
              <tbody data-asset-category-table-body></tbody>
            </table>
          </div>
          <p class="empty-state" data-asset-category-empty hidden>
            Noch keine Asset-Kategorien erfasst. Legen Sie Ihre erste Kategorie an.
          </p>
          <p class="form-error" data-asset-category-table-error hidden></p>
        </div>
      </section>
    </div>
  </section>
</div>

<script type="application/json" data-asset-category-state>{{{json assetCategoryState}}}</script>

<div class="modal" data-asset-category-modal hidden aria-hidden="true">
  <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="asset-category-modal-title">
    <header class="modal-header">
      <h2 id="asset-category-modal-title" data-asset-category-modal-title>Asset-Kategorie verwalten</h2>
      <button
        class="icon-button"
        type="button"
        data-close-asset-category-modal
        aria-label="Asset-Kategorie schließen"
      >
        &times;
      </button>
    </header>
    <div class="modal-body">
      <div class="form-field">
        <label for="asset-category-decision">Entscheidung</label>
        <select id="asset-category-decision" data-asset-category-decision>
          <option value="use">Verwenden</option>
          <option value="ignore">Ignorieren</option>
        </select>
      </div>
      <div class="form-field">
        <label for="asset-category-comment">Kommentar</label>
        <textarea
          id="asset-category-comment"
          rows="3"
          placeholder="Optionalen Kommentar hinzufügen"
          data-asset-category-comment
        ></textarea>
      </div>
      <div class="form-field">
        <label>AssetUnterKategorien</label>
        <p class="helper-text">
          Wählen Sie AssetUnterKategorien aus, die dieser Asset-Kategorie zugeordnet werden sollen.
        </p>
        <div class="asset-category-sub-category-list" data-asset-category-sub-category-list></div>
      </div>
      <p class="form-error" data-asset-category-modal-error hidden></p>
    </div>
    <div class="modal-footer">
      <button class="button button--ghost" type="button" data-cancel-asset-category>Abbrechen</button>
      <button class="button" type="button" data-save-asset-category>Speichern</button>
    </div>
  </div>
</div>
