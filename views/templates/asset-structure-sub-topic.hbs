<div
  class="asset-structure-app"
  data-app="asset-structure"
  data-topic-id="{{topic.id}}"
  data-sub-topic-id="{{subTopic.id}}"
>
  <aside class="asset-structure-sidebar" aria-label="Asset-Struktur-Navigation">
    <div class="sidebar-section">
      <a href="/asset-structure" class="sidebar-link sidebar-link--active">Themengebiete</a>
      <a href="/asset-types" class="sidebar-link">Asset-Typen</a>
    </div>
  </aside>
  <section class="asset-structure-content">
    <header class="page-header">
      <div>
        <h1 class="page-title">{{#if subTopic.displayTitle}}{{subTopic.displayTitle}}{{else}}Unbenanntes Sub-Themengebiet{{/if}}</h1>
        <p class="page-subtitle">Überblick über die Asset Kategorien, die diesem Sub-Themengebiet zugeordnet sind.</p>
      </div>
      <div class="page-actions">
        {{#if subTopic.measuresUrl}}
          <a class="button button--ghost" href="{{subTopic.measuresUrl}}">Maßnahmen anzeigen</a>
        {{/if}}
        <a class="button button--ghost" href="/asset-structure/{{topic.id}}">Zum Themengebiet</a>
      </div>
    </header>

    <nav class="breadcrumb" aria-label="Breadcrumb">
      <a href="/asset-structure">Asset-Struktur</a>
      <span aria-hidden="true">›</span>
      <a href="/asset-structure/{{topic.id}}">{{topic.displayTitle}}</a>
      <span aria-hidden="true">›</span>
      <span aria-current="page">{{#if subTopic.displayTitle}}{{subTopic.displayTitle}}{{else}}Unbenanntes Sub-Themengebiet{{/if}}</span>
    </nav>

    <div class="structure-body">
      <section class="card structure-card" aria-labelledby="sub-topic-details-title">
        <div class="section-header">
          <h2 class="section-title" id="sub-topic-details-title">Sub-Themengebiet-Details</h2>
          <button class="button" type="button">Änderungen speichern</button>
        </div>
        <form class="form-grid">
          <div class="form-field">
            <label for="sub-topic-title">Titel</label>
            <input
              id="sub-topic-title"
              type="text"
              value="{{subTopic.displayTitle}}"
              disabled
              aria-disabled="true"
            />
          </div>
          <div class="form-field form-field--full">
            <label for="sub-topic-notes">Notizen</label>
            <textarea
              id="sub-topic-notes"
              name="notes"
              rows="4"
              placeholder="Relevante Informationen oder Aufgaben dokumentieren"
            >{{notes}}</textarea>
          </div>
        </form>
      </section>

      <section class="structure-section" aria-labelledby="asset-categories-title">
        <div class="section-header">
          <h2 class="section-title" id="asset-categories-title">Asset Kategorien</h2>
        </div>
        <p class="helper-text">{{assetCategoryCount}} Asset Kategorien sind diesem Sub-Themengebiet zugeordnet.</p>
        <div class="card structure-card">
          {{#if assetCategories.length}}
            <div class="table-wrapper">
              <table class="table table--interactive" aria-describedby="asset-categories-title">
                <thead>
                  <tr>
                    <th scope="col">Asset Kategorie</th>
                    <th scope="col">Gruppen</th>
                    <th scope="col">Verantwortlich</th>
                    <th scope="col">Integrität</th>
                    <th scope="col">Verfügbarkeit</th>
                    <th scope="col">Vertraulichkeit</th>
                    <th scope="col">Maßnahmen</th>
                  </tr>
                </thead>
                <tbody>
                  {{#each assetCategories}}
                    <tr>
                      <td>
                        <a class="table-link" href="/asset-structure/{{../topic.id}}/{{../subTopic.id}}/{{id}}">{{title}}</a>
                      </td>
                      <td>
                        <a class="table-link" href="/asset-structure/{{../topic.id}}/{{../subTopic.id}}/{{id}}">{{groupCount}}</a>
                      </td>
                      <td>
                        <a class="table-link" href="/asset-structure/{{../topic.id}}/{{../subTopic.id}}/{{id}}">{{owner}}</a>
                      </td>
                      <td>
                        <a class="table-link" href="/asset-structure/{{../topic.id}}/{{../subTopic.id}}/{{id}}">{{integrity}}</a>
                      </td>
                      <td>
                        <a class="table-link" href="/asset-structure/{{../topic.id}}/{{../subTopic.id}}/{{id}}">{{availability}}</a>
                      </td>
                      <td>
                        <a class="table-link" href="/asset-structure/{{../topic.id}}/{{../subTopic.id}}/{{id}}">{{confidentiality}}</a>
                      </td>
                      <td>
                        {{#if measuresUrl}}
                          <a class="table-link table-link--muted" href="{{measuresUrl}}">In Maßnahmen öffnen</a>
                        {{else}}
                          —
                        {{/if}}
                      </td>
                    </tr>
                  {{/each}}
                </tbody>
              </table>
            </div>
          {{else}}
            <p class="empty-state">Diesem Sub-Themengebiet sind noch keine Asset Kategorien zugeordnet.</p>
          {{/if}}
        </div>
      </section>
    </div>
  </section>
</div>
